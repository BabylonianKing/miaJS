<div class="root" *ngIf="afAuth.userData">
  <div class="header">
    <div class="banner" style="background-image: url({{coverDownloadURL}});">

      <div class="edit-banner">
        <input id="banner" type="file" (change)="uploadBanner($event)" accept=".png, .jpg" style="display: none;">
        <label for="banner">Change Cover</label>
      </div>
    </div>
    <div class="profile-header">
      <div class="avatar" style="background-image: url({{profileDownloadURL}});">
        <div class="avatar-hover">
          <div class="edit-pic">
          <input id="profile" type="file" (change)="uploadProfile($event)" accept=".png, .jpg" style="display: none;">
          <label for="profile">Change Picture</label>
          </div>
        </div>
      </div>
      <div class="profile-header-infos">
        <div class="super-infos">
          <h2 [hidden]="profileService.editingName">{{(user.displayName != null) ? user.displayName: 'New User' }}</h2>

          <form #newName="ngForm" (submit)="profileService.editName(newName.value)">
            <input [hidden]="!profileService.editingName" placeholder="New name" type="text" name="displayName" autocomplete="off" ngModel>
          </form>

          <a (click)="profileService.editingName = !profileService.editingName" [hidden]="profileService.editingName">Edit</a>
          <a (click)="profileService.editingName = !profileService.editingName" [hidden]="!profileService.editingName">Save</a>
      </div>
        <div class="sub-infos">
          <!-- <p>{{ (status) ? status: 'Recently met Matilda'}}</p> -->
          <p>{{ (user.location) ? user.location: 'Somewhere, Somewhere' }}</p>
        </div>
      </div>
    </div>
  </div>


  <div class="infos">

    <!-- NAVIGATION -->
    <div class="profile-nav">
      <a (click)="section = 0" [ngClass]="{ 'active': section === 0 }">General</a>
      <a (click)="section = 1" [ngClass]="{ 'active': section === 1 }">Career</a>
      <a (click)="section = 2" [ngClass]="{ 'active': section === 2 }">Account</a>
    </div>

    <!-- GENERAL -->
    <div class="profile-section" *ngIf="section === 0">

      <!-- PHONE -->
      <div class="info">
        <div class="info-left">
          <h2>Phone Number</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPhone"> {{ crudService.formatNumber(user.phoneNumber) }}</p>


            <form #newPhone="ngForm" (submit)="profileService.editPhone(newPhone.value)">
              <input [hidden]="!profileService.editingPhone" placeholder="New phone number" type="tel" name="phone" autocomplete="off" ngModel>
            </form>


          </div>
          <a (click)="profileService.editingPhone = !profileService.editingPhone" [hidden]="profileService.editingPhone">Edit</a>
          <a (click)="profileService.editingPhone = !profileService.editingPhone" [hidden]="!profileService.editingPhone">Save</a>
        </div>
      </div>

      <!-- DATE OF BIRTH -->
      <div class="info">
        <div class="info-left">
          <h2>Date of Birth</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingDOB">{{ crudService.formatDate(user.dateOfBirth) || null }}</p>

            <form #newDOB="ngForm" (submit)="profileService.editDOB(newDOB.value)">
              <input [hidden]="!profileService.editingDOB" placeholder="New date of birth" type="date" name="dob" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingDOB = !profileService.editingDOB" [hidden]="profileService.editingDOB">Edit</a>
          <a (click)="profileService.editingDOB = !profileService.editingDOB" [hidden]="!profileService.editingDOB">Save</a>
        </div>
      </div>

      <!-- GENDER -->
      <div class="info">
        <div class="info-left">
          <h2>Gender</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingGender">{{ user.gender }}</p>

            <form #newGender="ngForm" (change)="profileService.editGender(newGender.value)">
              <select [hidden]="!profileService.editingGender" placeholder="New gender" name="gender" ngModel>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </form>

          </div>
          <a (click)="profileService.editingGender = !profileService.editingGender" [hidden]="profileService.editingGender">Edit</a>
          <a (click)="profileService.editingGender = !profileService.editingGender" [hidden]="!profileService.editingGender">Save</a>
        </div>
      </div>

      <!-- LINKS -->
      <div class="info">
        <div class="info-left">
          <h2>Social Links</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingGender">{{ user.gender }}</p>

            <form #newGender="ngForm" (change)="profileService.editGender(newGender.value)">
              <select [hidden]="!profileService.editingGender" placeholder="New gender" name="gender" ngModel>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </form>

          </div>
          <a (click)="profileService.editingGender = !profileService.editingGender" [hidden]="profileService.editingGender">Edit</a>
          <a (click)="profileService.editingGender = !profileService.editingGender" [hidden]="!profileService.editingGender">Save</a>
        </div>
      </div>

      <!-- INTERESTS -->
      <div class="info">
        <div class="info-left">
          <h2>Interests</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">{{ crudService.formatSpokenLanguages(user.interests) || null}}</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>


      <!-- VALUES -->
      <div class="info">
        <div class="info-left">
          <h2>Values</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">{{ crudService.formatSpokenLanguages(user.values) || null}}</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>

    </div>

    <!-- CAREER -->
    <div class="profile-section" *ngIf="section === 1">

      <!-- SPOKEN LANGUAGES -->
      <div class="info">
        <div class="info-left">
          <h2>Spoken Languages</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">{{ crudService.formatSpokenLanguages(user.spokenLanguages) || null}}</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>

      <!-- SKILLS -->
      <div class="info">
        <div class="info-left">
          <h2>Skills</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">{{ crudService.formatSpokenLanguages(user.spokenLanguages) || null}}</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>

      <!-- WORK HISTORY -->
      <div class="info">
        <div class="info-left">
          <h2>Experience</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">{{ crudService.formatSpokenLanguages(user.spokenLanguages) || null}}</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>

      <!-- EDUCATION HISTORY -->
      <div class="info">
        <div class="info-left">
          <h2>Education</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">{{ crudService.formatSpokenLanguages(user.spokenLanguages) || null}}</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>

      <!-- HONORS & AWARDS -->
      <div class="info">
        <div class="info-left">
          <h2>Honors & Awards</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">{{ crudService.formatSpokenLanguages(user.spokenLanguages) || null}}</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>
    </div>

    <!-- ACCOUNT -->
    <div class="profile-section" *ngIf="section === 2">

      <!-- EMAIL -->
      <div class="info">
        <div class="info-left">
          <h2>Email</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingEmail"> {{ user.email }}</p>
            <!-- EMAIL VERIFIED -->
            <img *ngIf="user.emailVerified" src="/assets/close.svg">
            <!-- EMAIL NOT VERIFIED => TO FILTERED INBOX -->
            <a href="https://mail.google.com/mail/u/0/#search/from%3Amatilda+in%3Aanywhere" target="_blank" class="verify-email" *ngIf="!user.emailVerified">Please verify your email!</a>

            <form #newEmail="ngForm" (submit)="profileService.editEmail(newEmail.value.email)">
              <input [hidden]="!profileService.editingEmail" placeholder="New email" type="email" name="email" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingEmail = !profileService.editingEmail" [hidden]="profileService.editingEmail">Edit</a>
          <a (click)="profileService.editingEmail = !profileService.editingEmail" [hidden]="!profileService.editingEmail">Save</a>
        </div>
      </div>

      <!-- PASSWORD -->
      <div class="info">
        <div class="info-left">
          <h2>Password</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">**********</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>

      <!-- NOTIFICATION PREFERENCES -->
      <div class="info">
        <div class="info-left">
          <h2>Email Reports</h2>
        </div>
        <div class="info-right">
          <div class="field">
            <p [hidden]="profileService.editingPassword">Weekly</p>

            <form #newPassword="ngForm" (submit)="profileService.editPassword(newPassword.value.password)">
              <input [hidden]="!profileService.editingPassword" placeholder="New password" type="password" name="password" autocomplete="off" ngModel>
            </form>

          </div>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="profileService.editingPassword">Edit</a>
          <a (click)="profileService.editingPassword = !profileService.editingPassword" [hidden]="!profileService.editingPassword">Save</a>
        </div>
      </div>

    </div>


  </div>


</div>
